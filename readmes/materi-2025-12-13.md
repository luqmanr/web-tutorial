# Scraping dengan Selenium

## Pengantar
Selenium adalah alat yang kuat untuk mengotomatiskan browser web. Biasanya digunakan untuk web scraping, pengujian, dan otomatisasi aplikasi web.

## Prasyarat
- Python 3.x
- Library `selenium` terinstal (`pip install selenium`)
- Browser web (Chrome atau Firefox)
- WebDriver yang sesuai (ChromeDriver atau GeckoDriver)

## Cara Mendownload WebDriver

### Untuk ChromeDriver
1. Buka situs resmi ChromeDriver: https://chromedriver.chromium.org/downloads
2. Unduh versi yang cocok dengan versi browser Chrome Anda.
   - Anda dapat memeriksa versi Chrome Anda dengan mengakses `chrome://settings/help`.
3. Ekstrak file yang diunduh dan tempatkan di direktori pilihan Anda (misalnya, `C:\webdriver\chromedriver.exe` di Windows atau `~/webdriver/chromedriver` di macOS/Linux).

### Untuk GeckoDriver (Firefox)
1. Buka situs resmi GeckoDriver: https://github.com/mozilla/geckodriver/releases
2. Unduh versi yang cocok dengan versi browser Firefox Anda.
   - Anda dapat memeriksa versi Firefox Anda dengan mengakses `about:version`.
3. Ekstrak file yang diunduh dan tempatkan di direktori pilihan Anda (misalnya, `C:\webdriver\geckodriver.exe` di Windows atau `~/webdriver/geckodriver` di macOS/Linux).

## Mengatur WebDriver di Python

### Menggunakan ChromeDriver

```python
from selenium import webdriver
from selenium.webdriver.chrome.service import Service
from selenium.webdriver.chrome.options import Options

# Mengatur service ChromeDriver
chrome_driver_path = "/path/to/your/chromedriver"  # Sesuaikan jalur jika perlu
service = Service(chrome_driver_path)

# Mengatur opsi Chrome (opsional)
chrome_options = Options()
chrome_options.add_argument("--headless")  # Jalankan dalam mode headless (opsional)
# Opsi untuk membuka profil pengguna default lokal Chrome
# Ganti "/path/to/your/chrome/profile" dengan jalur profil Anda yang sebenarnya
# Di Windows, ini biasanya di C:\Users\<YourUser>\AppData\Local\Google\Chrome\User Data
# Di macOS, ini biasanya di ~/Library/Application Support/Google/Chrome
# Di Linux, ini biasanya di ~/.config/google-chrome
chrome_options.add_argument("--user-data-dir=/path/to/your/chrome/profile")
chrome_options.add_argument("--profile-directory=Default")

# Membuat driver Chrome
driver = webdriver.Chrome(service=service, options=chrome_options)

# Contoh penggunaan
driver.get("http://quotes.toscrape.com/")
print(driver.title)

# Tutup driver
driver.quit()
```

### Menggunakan GeckoDriver (Firefox)

```python
from selenium import webdriver
from selenium.webdriver.firefox.service import Service
from selenium.webdriver.firefox.options import Options

# Mengatur service GeckoDriver
gecko_driver_path = "/path/to/your/geckodriver"  # Sesuaikan jalur jika perlu
service = Service(gecko_driver_path)

# Mengatur opsi Firefox (opsional)
firefox_options = Options()
firefox_options.add_argument("--headless")  # Jalankan dalam mode headless (opsional)
# Opsi untuk membuka profil pengguna default lokal Firefox
# Ganti "/path/to/your/firefox/profile" dengan jalur profil Anda yang sebenarnya
# Di Windows, ini biasanya di C:\Users\<YourUser>\AppData\Roaming\Mozilla\Firefox\Profiles\<profile_name>
# Di macOS, ini biasanya di ~/Library/Application Support/Firefox/Profiles/<profile_name>
# Di Linux, ini biasanya di ~/.mozilla/firefox/<profile_name>
firefox_options.add_argument("-profile")
firefox_options.add_argument("/path/to/your/firefox/profile")

# Membuat driver Firefox
driver = webdriver.Firefox(service=service, options=firefox_options)

# Contoh penggunaan
driver.get("http://quotes.toscrape.com/")
print(driver.title)

# Tutup driver
driver.quit()
```

## Tips
- Selalu ingat untuk menutup driver setelah digunakan dengan `driver.quit()` agar tidak terjadi kebocoran sumber daya.
- Anda juga dapat mengatur jalur WebDriver sebagai variabel lingkungan atau menggunakan jalur relatif jika skrip Anda berada di direktori yang sama dengan WebDriver.
- Gunakan opsi `--headless` untuk menjalankan browser dalam mode headless untuk eksekusi yang lebih cepat (tidak memerlukan antarmuka grafis).

## Solusi Masalah
- Jika Anda mengalami `WebDriverException`, pastikan jalur WebDriver benar dan file tersebut dapat dijalankan.
- Pastikan versi browser Anda kompatibel dengan versi WebDriver.
- Jika Anda menggunakan macOS atau Linux, gunakan slash miring dalam jalur file (`~/webdriver/chromedriver` bukan `C:/webdriver/chromedriver`).

## Kesimpulan
Dengan Selenium dan WebDriver yang sesuai, Anda dapat mengotomatiskan penelusuran web dan mengekstrak data dari situs web. Panduan ini memberikan pengaturan dasar untuk kedua Chrome dan Firefox. Sesuaikan opsi dan jalur sesuai kebutuhan Anda.

## Navigasi Situs Web

Berikut adalah contoh praktis untuk melakukan navigasi pada situs web menggunakan Selenium:

### 1. Menemukan Form Login, Mengisi Username dan Password

```python
from selenium import webdriver
from selenium.webdriver.chrome.service import Service
from selenium.webdriver.chrome.options import Options
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC

# Membuat driver Chrome
chrome_options = Options()
driver = webdriver.Remote(
    command_executor='http://localhost:4444/wd/hub',
    options=chrome_options
)

# Buka halaman login
url = "https://the-internet.herokuapp.com/login" # Changed URL to the-internet.herokuapp.com/login
driver.get(url)

# Menunggu elemen form login muncul
wait = WebDriverWait(driver, 10)
username_field = wait.until(EC.presence_of_element_located((By.NAME, "username")))
password_field = wait.until(EC.presence_of_element_located((By.NAME, "password")))

# Masukkan username dan password (menggunakan kredensial yang valid untuk the-internet.herokuapp.com)
username_field.send_keys("tomsmith") # Changed username
password_field.send_keys("SuperSecretPassword!") # Changed password

# ### 2. Menemukan Tombol Submit dan Klik

submit_button = wait.until(EC.element_to_be_clickable((By.XPATH, "//button[@type='submit']")))
submit_button.click()

# ### 3. Memeriksa Apakah Login Berhasil atau Gagal

# Cek apakah halaman berhasil dimuat atau terdapat pesan error
try:
    # Menunggu elemen flash message yang muncul setelah login
    flash_message_element = wait.until(EC.presence_of_element_located((By.ID, "flash")))
    
    if "You logged into a secure area!" in flash_message_element.text:
        print("Login berhasil!")
        print(f"Pesan: {flash_message_element.text}")
    elif "Your username is invalid!" in flash_message_element.text or "Your password is invalid!" in flash_message_element.text:
        print("Login gagal!")
        print(f"Pesan error: {flash_message_element.text}")
    else:
        print("Login status tidak dikenali.")
        print(f"Pesan: {flash_message_element.text}")

except Exception as e:
    print("Terjadi kesalahan atau elemen flash tidak ditemukan.")
    print(f"Kesalahan: {e}")

# Tutup driver
driver.quit()
```


---

# üåê Tutorial Mengunduh Webpage Menjadi Berkas HTML Lengkap

Tutorial ini menjelaskan dua metode untuk menyimpan halaman web lengkap dengan aset (CSS & JavaScript), termasuk opsi untuk menyimpannya sebagai satu berkas tunggal.

## 1. Metode Standar Peramban (Disarankan untuk Keandalan)

Metode ini akan menyimpan berkas HTML utama dan semua aset pendukungnya (CSS, JS, Gambar) dalam folder terpisah.

### Langkah-Langkah

1.  ### Buka Halaman Target
    Buka peramban web Anda (Chrome, Firefox, Edge) dan navigasikan ke halaman web yang ingin Anda simpan.

2.  ### Aktifkan Fitur "Simpan Sebagai"
    Tekan kombinasi *shortcut* yang sesuai, atau gunakan menu peramban:
    * **Windows/Linux:** $Ctrl + S$
    * **macOS:** $Cmd + S$

3.  ### Pilih Jenis Penyimpanan
    Dalam dialog **Simpan Halaman Sebagai**, pastikan Anda memilih opsi yang tepat:
    * Cari kolom **"Jenis"** atau **"Save as type"**.
    * Pilih **"Laman Web, Lengkap"** (atau **"Webpage, Complete"**). 
    * Berikan nama untuk berkas Anda dan pilih lokasi penyimpanan.

4.  ### Hasil Akhir
    Anda akan mendapatkan dua *item* di lokasi penyimpanan:
    * Satu berkas HTML (`namafile.html`).
    * Satu folder yang berisi semua aset pendukung (`namafile_files` atau sejenisnya).

---

## 2. Metode Berkas Tunggal (Menggunakan Ekstensi)

Untuk mengunduh semua konten (termasuk CSS, JS, dan Gambar) menjadi **satu berkas HTML tunggal** yang *self-contained*, Anda memerlukan ekstensi peramban pihak ketiga seperti **SingleFile**.

> **‚ö†Ô∏è Catatan Penting:** Metode ini lebih kompleks tetapi menghasilkan satu berkas tunggal.

### Langkah-Langkah

1.  ### Instal Ekstensi SingleFile
    * Buka Toko Ekstensi/Add-on peramban Anda (Chrome Web Store atau Firefox Add-ons).
    * Cari dan instal ekstensi bernama **"SingleFile"**.

2.  ### Buka dan Unduh Halaman
    * Navigasikan ke halaman web yang ingin Anda simpan.
    * Klik pada **ikon ekstensi SingleFile** (biasanya di bilah alat peramban). 

3.  ### Proses Otomatis
    * Ekstensi akan secara otomatis memproses halaman (mengambil semua CSS/JS dan menyematkannya di dalam HTML).
    * Berkas HTML tunggal tersebut akan diunduh ke folder *Downloads* Anda.

### Hasil Akhir
* Hanya satu berkas HTML yang dihasilkan (`namafile.html`).
* Berkas ini dapat dibuka secara *offline* dan akan terlihat persis seperti halaman aslinya.